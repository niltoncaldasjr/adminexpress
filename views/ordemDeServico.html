<style>
    .pesquisacliente {
        background-color: #fff;
        position: absolute;
        border: 1px;
    }

    .pesquisaparticipante {
        background-color: #fff;
        position: absolute;
        border: 1px;
    }

    .qtdeitem {
        width: 30px;
    }

</style>

<div class="wrapper wrapper-content animated fadeInRight">
    <!--<div class="container services">-->
    <div class="row">
        <!--inicio-->
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="">Nº</label>
                                <input class="form-control" type="text" ng-model="os.id">
                            </div>
                        </div>
                        <div class="col-md-4 col-md-offset-4">
                            <div class="form-group">
                                <label for="">Data</label>
                                <input class="form-control" type="text" ng-model="os.data">
                            </div>
                        </div>
                    </div>


                    <div class="form-group">
                        <label for="">Cliente</label>
                        <div class="input-group"><input type="text" placeholder="Procurar"
                                                        class="input-sm form-control" ng-model="os.cliente.nome"> <span
                                class="input-group-btn">
                                        <button type="button" class="btn btn-sm btn-success"
                                                ng-click="pesquisaCliente(os.cliente.nome)">Buscar
                                        </button> </span></div>
                        <div class="pesquisacliente" ng-if="escolhido">
                            <ul class="nav">
                                <li ng-repeat="p in clientes"><a ng-click="addCliente(p)">{{p.nome}} - {{p.cpf}}</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="">Serviço principal</label>
                        <select class="input-sm form-control input-s-sm inline"
                                required id="idservico" name="servico" ng-model="os.servico"
                                ng-options="servico as servico.nome for servico in servicos track by servico.id"
                                ng-blur="escolher(os.servico)">
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="">Observações</label>
                        <textarea ng-model="os.observacao" class="form-control" name="obs" id="" cols="30"
                                  rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="ibox">
                <div class="ibox-content">
                    <div class="tabs-container">
                        <uib-tabset>
                            <uib-tab>
                                <uib-tab-heading>
                                    <i class="fa fa-list-alt"></i>
                                    Itens de Serviço
                                </uib-tab-heading>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-5">
                                            <div class="input-group"><select
                                                    class="input-sm form-control input-s-sm inline"
                                                    required id="idsrvico" name="servico" ng-model="itemdeservico"
                                                    ng-options="servico as servico.nome for servico in servicos track by servico.id"
                                                    ng-selected="mostrar(servico)">
                                            </select> <span
                                                    class="input-group-btn">
                                        <button type="button" class="btn btn-sm btn-primary"
                                                ng-click="addItem(itemdeservico)"> Add!
                                        </button> </span></div>

                                        </div>


                                    </div>
                                    <div class="table-responsive m-t">
                                        <table class="table invoice-table">
                                            <thead>
                                            <tr>

                                                <th>Lista Itens</th>
                                                <th>Ações</th>
                                                <th>Qnde</th>
                                                <th>Preço Unitário</th>
                                                <th>Preço Total</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="cada in os.itensdeservico">

                                                <td>
                                                    <div><strong>{{cada.nome}}</strong></div>
                                                    <small>{{cada.descricao}}</small>
                                                </td>
                                                <td>
                                                    <a href=""><i class="fa fa-plus-circle text-navy"
                                                                  ng-click="aumentarQtde(cada)"></i></a>
                                                    <a href=""><i class="fa fa-minus-circle text-navy"
                                                                  ng-click="diminuirQtde(cada)"></i></a>
                                                </td>
                                                <td><input class="qtdeitem" type="text" ng-model="cada.qtde"></td>
                                                <td>R${{cada.valor}}</td>
                                                <td>R${{cada.parcial = (cada.valor * cada.qtde)}}</td>
                                            </tr>

                                            </tbody>
                                        </table>
                                    </div><!-- /table-responsive -->
                                    <table class="table invoice-total">
                                        <tbody>
                                        <tr>
                                            <td><strong>Sub Total :</strong></td>
                                            <td>R${{os.subtotal = pegartotal()}}</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Desconto :</strong></td>
                                            <td>R$<input class="qtdeitem" type="text" ng-model="os.desconto"></td>
                                        </tr>
                                        <tr>
                                            <td><strong>TOTAL :</strong></td>
                                            <td>R${{os.total = os.subtotal - (os.subtotal * (os.desconto/100))}}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </uib-tab>
                            <uib-tab>
                                <uib-tab-heading>
                                    <i class="fa fa-check-square-o"></i>
                                    Checklist
                                </uib-tab-heading>
                                <div class="panel-body">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>Ordem</th>
                                                <th>Item</th>
                                                <th>Status</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="chk in os.checklists">
                                                <td>{{chk.ordem}}</td>
                                                <td>{{chk.item}}</td>
                                                <td><input icheck type="checkbox" ng-model="chk.status"></td>
                                            </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </uib-tab>
                            <uib-tab>
                                <uib-tab-heading>
                                    <i class="fa fa-users"></i>
                                    Participantes
                                </uib-tab-heading>
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="col-sm-5">
                                            <div class="input-group"><input type="text" placeholder="Procurar"
                                                                            class="input-sm form-control"
                                                                            ng-model="busca"> <span
                                                    class="input-group-btn">
                                        <button type="button" class="btn btn-sm btn-primary"
                                                ng-click="pesquisaParticipante(busca)">Pesquisar!
                                        </button> </span></div>
                                            <div class="pesquisaparticipante" ng-if="added">
                                                <ul class="nav">
                                                    <li ng-repeat="pes in clientes"><a ng-click="addParticipante(pes)">{{pes.nome}}
                                                        - {{pes.cpf}}</a></li>
                                                </ul>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="table-responsive">
                                        <table class="table">
                                            <thead>
                                            <tr>
                                                <th>Id#</th>
                                                <th>Nome</th>
                                                <th>CPF/CNPJ</th>
                                                <th>Função</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="par in os.participantes">
                                                <td>{{par.id}}</td>
                                                <td>{{par.nome}}</td>
                                                <td>{{par.cpf}}</td>
                                                <td><select name="funcao">
                                                    <option value="">Opção 1</option>
                                                    <option value="">Opção 2</option>
                                                </select>
                                                </td>
                                            </tr>


                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </uib-tab>
                            <uib-tab>
                                <uib-tab-heading>
                                    <i class="fa fa-paperclip"></i>
                                    Anexos
                                </uib-tab-heading>
                                <div class="panel-body">
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-success"><i class="fa fa-upload"></i>
                                            Enviar Arquivo
                                        </button>
                                    </div>
                                </div>
                            </uib-tab>
                        </uib-tabset>
                    </div>
                </div>
            </div>
            <div class="ibox">
                <div class="ibox-content">
                    <button type="button" class="btn btn-success"
                            ng-click="finalizar(os)">Finalizar
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>